FROM python@sha256:0222b795db95bf7412cede36ab46a266cfb31f632e64051aac9806dabf840a61

WORKDIR /app

ENV CHAT_MODEL_REPO=Qwen/Qwen3-0.6B \
    PYTHONDONTWRITEBYTECODE=1 \
    PYTHONUNBUFFERED=1 \
    PIP_NO_CACHE_DIR=1 \
    PIP_DISABLE_PIP_VERSION_CHECK=1 \
    PYTHONFAULTHANDLER=1

COPY requirements.txt .

RUN pip install -r requirements.txt

COPY . .

ENTRYPOINT ["uvicorn"]
CMD ["--app-dir", "src", "main:app", "--host", "0.0.0.0", "--port", "8000"]

